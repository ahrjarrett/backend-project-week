{"version":3,"sources":["webpack:///./src/api/modules/query.js"],"names":["testData","message","controllers","createOne","Model","body","create","updateOne","docToUpdate","update","merge","save","deleteOne","docToDelete","remove","getOne","docToGet","resolve","getAll","find","exec","findByParam","id","findById","req","res","next","then","status","json","doc","catch","err","docFromId","docs","Error","generateControllers","overrides","defaults"],"mappings":"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","file":"0.3c3056936afb53762cb0.hot-update.js","sourcesContent":["import merge from 'lodash'\n\nconst testData = { message: 'hello' }\n\nexport const controllers = {\n  createOne(Model, body) {\n    return Model.create(body)\n  },\n\n  updateOne(docToUpdate, update) {\n    // merge mutates its first argument!\n\n    merge(docToUpdate, update)\n    return docToUpdate.save()\n  },\n\n  deleteOne(docToDelete) {\n    return docToDelete.remove()\n  },\n\n  getOne(docToGet) {\n    return Promise.resolve(docToGet)\n  },\n\n  getAll(Model) {\n    return Model.find({}).exec()\n  },\n\n  findByParam(Model, id) {\n    return Model.findById(id).exec()\n  },\n}\n\nexport const createOne = Model => (req, res, next) => {\n  return controllers.createOne(Model, req.body)\n    .then(doc => res.status(201).json(doc))\n    .catch(err => next(err))\n}\n\nexport const updateOne = Model => async (req, res, next) => {\n  const docToUpdate = req.docFromId\n  const update = req.body\n\n  return controllers.updateOne(docToUpdate, update)\n    .then(doc => res.status(201).json(doc))\n    .catch(err => next(err))\n}\n\nexport const deleteOne = Model => (req, res, next) => {\n  return controllers.deleteOne(req.docFromId)\n    .then(doc => res.status(201).json(doc))\n    .catch(err => next(err))\n}\n\nexport const getOne = Model => (req, res, next) => {\n  return controllers.getOne(req.docFromId)\n    .then(doc => res.status(201).json(doc))\n    .catch(err => next(err))\n}\n\nexport const getAll = Model => (req, res, next) => {\n  return controllers.getAll(Model)\n    .then(docs => res.status(201).json(docs))\n    .catch(err => next(err))\n}\n\nexport const findByParam = Model => (req, res, next, id) => {\n  return controllers.findByParam(Model, id)\n    .then(doc => {\n      if (!doc) next(new Error('Not found error'))\n      else {\n        // this is where we actually attach the doc to the req object\n        req.docFromId = doc\n        next()\n      }\n    })\n    .catch(err => next(err))\n}\n\nexport const generateControllers = (Model, overrides = {}) => {\n  const defaults = {\n    findByParam: findByParam(Model),\n    getAll: getAll(Model),\n    getOne: getOne(Model),\n    deleteOne: deleteOne(Model),\n    updateOne: updateOne(Model),\n    createOne: createOne(Model),\n  }\n  return { ...defaults, ...overrides }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/modules/query.js"],"sourceRoot":""}